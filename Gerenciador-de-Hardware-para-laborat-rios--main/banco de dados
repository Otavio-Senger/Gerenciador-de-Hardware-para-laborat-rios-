create database projetoaplicadoII;
use projetoaplicadoII;

create table usuarios(
id_usu int auto_increment primary key,
nome_usu varchar(50) not null unique,
email_usu varchar(50) not null unique,
senha_usu varchar(20) not null unique,
perfil_usu varchar(50) not null
);

create table manutencoes(
id_mn int auto_increment primary key,
data_mn date,
status_mn varchar(50) not null,
horario_mn varchar(50) not null,
tipo_mn varchar(50) not null
);

create table equipamentos(
id_eq int auto_increment primary key,
status_equipamento varchar(50) not null
);

create table laboratorios(
id_lab int auto_increment primary key,
letra_lab varchar(50) not null
);

create table pecas(
id_pc int auto_increment primary key, 
marca_pc varchar(50) not null,
estoque_pc int not null,
nome_pc varchar(50) not null
);

alter table manutencoes
add column id_usu int,
add constraint fk_usuario
foreign key (id_usu) references usuarios(id_usu);

alter table manutencoes
add column id_eq int,
add constraint fk_equipamento
foreign key (id_eq) references equipamentos(id_eq);

alter table manutencoes
add column id_pc int,
add constraint fk_pecas
foreign key (id_pc) references pecas(id_pc);

alter table equipamentos
add column id_lab int,
add constraint fk_laboratorio
foreign key (id_lab) references laboratorios(id_lab);

alter table equipamentos
add column id_pc int,
add constraint fk_pecas2
foreign key (id_pc) references pecas(id_pc);

alter table equipamentos
add column id_mn int,
add constraint fk_manutencao
foreign key (id_mn) references manutencoes(id_mn);

alter table laboratorios
add column id_eq int,
add constraint fk_equipamento2
foreign key (id_eq) references equipamentos(id_eq);

alter table laboratorios
add column id_mn int,
add constraint fk_manutencao2
foreign key (id_mn) references manutencoes(id_mn);

alter table pecas
add column id_eq int,
add constraint fk_equipamento3
foreign key (id_eq) references equipamentos(id_eq);
